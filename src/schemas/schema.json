{'title': 'query-exporter config file schema', 'type': 'object', 'additionalProperties': False, 'required': ['databases', 'metrics', 'queries'
    ], 'properties': {'databases': {'title': 'Databases to connect to', 'type': 'object', 'additionalProperties': False, 'patternProperties': {'.*': {'$ref': '#/definitions/database'
                }
            }
        }, 'metrics': {'title': 'Definition for metrics to expose', 'type': 'object', 'additionalProperties': False, 'patternProperties': {'^[a-zA-Z_:
                ][a-zA-Z0-9_:
                ]*$': {'$ref': '#/definitions/metric'
                }
            }
        }, 'queries': {'title': 'Definitions for SQL queries to perform', 'type': 'object', 'additionalProperties': False, 'patternProperties': {'.*': {'$ref': '#/definitions/query'
                }
            }
        }
    }, 'definitions': {'label': {'title': 'String for metrics and label names', 'type': 'string', 'pattern': '^[a-zA-Z_
            ][a-zA-Z0-9_
            ]*$'
        }, 'time-interval': {'title': 'An integer time interval', 'description': 'The interval can be specified as a number, in which case it\'s interpreted as seconds, or as a string.\nValid suffixes for string format are "s",
            "m",
            "h",
            "d".\n', 'anyOf': [
                {'type': 'integer', 'minimum': 1
                },
                {'type': 'string', 'pattern': '^[
                        0-9
                    ]+[smhd
                    ]?$'
                },
                {'type': 'null'
                }
            ]
        }, 'database': {'title': 'A database to run queries on', 'type': 'object', 'additionalProperties': False, 'required': ['dsn'
            ], 'properties': {'dsn': {'title': 'Database connection details', 'description': 'Can be specified either a connection string, in the format\n\n  dialect[+driver
                    ]: //[user:password][@host:port]/database[?option=value&...]\n\nor as key/value pairs.\nNote that if the string format is used, username and passwords need to be URL-quoted.\n', 'oneOf': [{'type': 'string'}, {'type': 'object', 'additionalProperties': False, 'required': ['dialect'], 'properties': {'dialect': {'title': 'The database dialect', 'description': 'It can can including the driver to use (as "dialect+driver").\n', 'type': 'string'}, 'user': {'title': 'The user for the connection', 'description': "Differently from the DSN string form, this doesn't need to be URL-quoted.\n", 'type': 'string'}, 'password': {'title': 'The password for the connection', 'description': "Differently from the DSN string form, this doesn't need to be URL-quoted.\n", 'type': 'string'}, 'host': {'title': 'The database hostname or IP address', 'description': 'IPv6 addresses must be enclosed in square brackets.\n', 'type': 'string'}, 'port': {'title': 'The database port', 'description': 'If not specified, the database engine default is used.\n', 'type': 'integer', 'minimum': 1, 'maximum': 65535}, 'database': {'title': 'The database name', 'description': 'Name of the database to connect to.\n', 'type': 'string'}, 'options': {'title': 'Engine-specific connection options', 'description': 'Options to pass to the database engine, as key/value.\n', 'type': 'object'}}}]}, 'autocommit': {'title': 'Whether to enable autocommit for queries', 'description': "When set to false, don't autocommit after each query.\n", 'type': 'boolean', 'default': True}, 'keep-connected': {'title': 'Whether to keep the connection open for the database between queries', 'description': 'When set to false, it will disconnect from the database after each run.\n', 'type': 'boolean', 'default': True}, 'connect-sql': {'title': 'Queries to run at database connection', 'description': 'An optional list of SQL queries to run on database connection.\n', 'type': 'array', 'items': {'type': 'string'}, 'minItems': 1}, 'labels': {'title': 'Additional static labels', 'description': 'Label names and values to apply to metrics when run on the database.\nAll databases need to declare the same set of label names.\n', 'type': 'object', 'additionalProperties': False, 'patternProperties': {'^[a-zA-Z_:][a-zA-Z0-9_:]*$': {'type': 'string'}}}}}, 'metric': {'title': 'A Prometheus metric to export', 'type': 'object', 'additionalProperties': False, 'required': ['type'], 'properties': {'type': {'title': 'The metric type', 'type': 'string', 'enum': ['counter', 'enum', 'gauge', 'histogram', 'summary']}, 'description': {'title': 'A text description of the metric use', 'type': 'string'}, 'labels': {'title': 'Labels associated to the metric', 'type': 'array', 'items': {'$ref': '#/definitions/label'}, 'minItems': 1, 'uniqueItems': True}, 'buckets': {'label': 'For histogram metrics, values for buckets', 'type': 'array', 'items': {'type': 'number'}, 'minItems': 1, 'uniqueItems': True}, 'states': {'label': 'For enum metrics, possible states', 'items': {'type': 'string'}, 'minItems': 1, 'uniqueItems': True}, 'expiration': {'title': 'Interval from last update after which a metric series is cleared', 'description': 'If specified and different than null, when no updates on a series (set of label values) for the metric happen in the specified amount of time, the series is cleared.\nThe expiration is tracked independently for each labels value combination.\n', '$ref': '#/definitions/time-interval'}, 'increment': {'title': 'For counter metrics, whether to increment by query result', 'description': 'If set to false, the counter value is set to the result of the query.\nBy default, counters are incremented by the value returned by the query.\nNOTE: This behavior will be reversed in the 3.0 release, and increment will be set to false by default.\n', 'type': 'boolean', 'default': True}}}, 'query': {'title': 'Definition for a SQL query to run', 'description': 'A SQL query can be run on multiple databases, and update one or more metrics.\n', 'type': 'object', 'additionalProperties': False, 'required': ['databases', 'metrics', 'sql'], 'properties': {'databases': {'title': 'Name of databases to run the query on', 'type': 'array', 'items': {'type': 'string'}, 'minItems': 1, 'uniqueItems': True}, 'interval': {'title': 'The time interval at which queries are run', 'description': 'If not specified or specified as null, the query will be run on HTTP requests.\nAlternatively, the "schedule" property can be specified to run the query at specific times.\n', '$ref': '#/definitions/time-interval'}, 'metrics': {'title': 'List of metrics that the query updates', 'type': 'array', 'items': {'type': 'string'}, 'minItems': 1, 'uniqueItems': True}, 'parameters': {'title': 'Parameter sets for the query (either a list or a dictionary)', 'description': 'Specify values for parameters defined in the query.\nParameters are specified in the form ":param".\nThe value of this config can be\n- a list of dictionaries mapping parameter names to values.\n  The query is run once for each entry in the list.\n\n- a dictionary mapping names to a list of dictionaries mapping sub-names and values.\n  In this case, the parameter name format is ":key__subkey".\n\n  The query is executed once for every combination of entries from the top level keys.\n', 'oneOf': [{'type': 'array', 'items': {'type': 'object'}, 'minItems': 1, 'uniqueItems': True}, {'type': 'object', 'minItems': 1, 'uniqueItems': True, 'patternProperties': {'.*': {'type': 'array', 'items': {'type': 'object'}, 'minItems': 1, 'uniqueItems': True}}}]}, 'schedule': {'title': 'Time schedule for executing the query', 'description': 'A cron-like expression for describing the schedule to run the query.\nAlternatively, the "interval" property can be specified to run the query at constant time intervals.\n', 'type': 'string'}, 'sql': {'title': 'The SQL code for the query', 'type': 'string'}, 'timeout': {'title': 'Query timeout, in seconds', 'description': 'If specified, a timeout in seconds after which the query is canceled.\n', 'type': 'number', 'exclusiveMinimum': 0, 'multipleOf': 0.1}}}}}